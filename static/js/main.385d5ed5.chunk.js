(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n,r=a(1),i=a.n(r),o=(a(78),a(36)),s=a(37),c=a(44),l=a(42),u=a(45),m=a.n(u),p=a(8),f=a(23),d=a.n(f),b=a(3),g=a(49),v=a(65),E=a(66),h=a(4),C=a.n(h),O=a(9),j=a(2),_=a(38),P=a.n(_),w=function(e){if(P.a.isAxiosError(e)&&e.response){var t=e.response.data.error;console.log(t)}},y=P.a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9359a22e-adad-4c18-8f69-1475882f26c8"},withCredentials:!0}),k=function(){return y.get("auth/me")},N=function(e,t,a){return y.post("auth/login",{email:e,password:t,rememberMe:a})},S=function(){return y.delete("auth/login")};!function(e){e.changePreloader="COMMON/PRELOADER"}(n||(n={}));var x,A={preloader:!1},I=function(e){return{type:n.changePreloader,payload:{preloader:e}}};!function(e){e.setAuthData="AUTH/PROFILE/SET-NEW-POST-CLICK"}(x||(x={}));var T,U={id:0,email:"",login:"",isAuth:!1},F=function(e){return{type:x.setAuthData,payload:Object(j.a)({},e)}},D=function(){return function(){var e=Object(O.a)(C.a.mark(function e(t){var a,n,r,i,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(I(!0)),e.prev=1,e.next=4,k();case 4:return a=e.sent,n=a.data.data,r=n.id,i=n.email,o=n.login,r&&t(F({id:r,email:i,login:o,isAuth:!0})),e.abrupt("return","aaa");case 10:e.prev=10,e.t0=e.catch(1),w(e.t0);case 13:t(I(!1));case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},M=function(){var e=Object(b.d)(function(e){return e.login.isAuth}),t=Object(b.c)();return i.a.createElement("nav",{className:d.a.navbar},i.a.createElement(p.c,{exact:!0,to:"/",activeClassName:d.a.active},i.a.createElement(v.a,null),i.a.createElement("span",null,"My profile")),i.a.createElement(p.c,{to:"/dialogs",activeClassName:d.a.active},i.a.createElement(g.b,null),i.a.createElement("span",null,"Message")),i.a.createElement(p.c,{to:"/friends",activeClassName:d.a.active},i.a.createElement(E.a,null),i.a.createElement("span",null,"Friends")),i.a.createElement(p.c,{to:"/users",activeClassName:d.a.active},i.a.createElement(g.a,null),i.a.createElement("span",null,"Users")),e&&i.a.createElement("button",{onClick:function(){t(function(){var e=Object(O.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(I(!0)),e.prev=1,e.next=4,S();case 4:0===e.sent.data.resultCode&&t(F({id:0,email:"",login:"",isAuth:!1})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w(e.t0);case 11:t(I(!1));case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}())}},"Log Out",i.a.createElement(p.b,{style:{display:"none"},to:""})))},R=a(6),L=a(67),z=a.n(L),q=a(19),H=i.a.memo(function(e){var t=e.value,a=e.updateStatusTC,n=Object(r.useState)(!1),o=Object(q.a)(n,2),s=o[0],c=o[1],l=Object(r.useState)(t),u=Object(q.a)(l,2),m=u[0],p=u[1];return i.a.createElement("div",null,s?i.a.createElement("div",null,i.a.createElement("input",{value:m,autoFocus:!0,onBlur:function(){a(m),c(!1)},onChange:function(e){return p(e.currentTarget.value)}})):i.a.createElement("span",{style:{fontSize:16,wordBreak:"break-word"},onDoubleClick:function(){return c(!0)}},t||"NO STATUS"))}),B=a(43),G=a(27),V=function(e){return y.get("profile/"+e)},W=function(e){return y.get("profile/status/"+e)},Z=function(e){return y.put("profile/status",{status:e})},J=function(e){var t=new FormData;return t.append("image",e),y.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},K=function(e){return y.put("profile",e).then(function(e){return e.data})};!function(e){e.setNewPostClick="PROFILE/SET-NEW-POST-CLICK",e.setProfileUserData="PROFILE/SET-PROFILE-USER-DATA",e.setStatus="PROFILE/SET-STATUS",e.updatePhotos="PROFILE/UPDATE-PHOTOS"}(T||(T={}));var Q={postsData:[{id:Object(G.v1)(),message:"Memento mori",likeCount:12},{id:Object(G.v1)(),message:"How are you guys?",likeCount:212},{id:Object(G.v1)(),message:"Hello world!",likeCount:1212}],userProfilePage:{},preloader:!1,status:""},X=function(e){return{type:T.setProfileUserData,payload:{userProfilePage:e}}},Y=function(e){return{type:T.setStatus,payload:{status:e}}},$=a(28),ee=a.n($),te=a(29),ae=a.n(te),ne=function(e){var t=e.hide,a=e.setHide,n=Object(b.d)(function(e){return e.profile.userProfilePage});return i.a.createElement("div",{className:ae.a.mainContainer},i.a.createElement("div",{className:ae.a.buttonContainer},i.a.createElement("button",{className:ae.a.button,onClick:function(){return a(!t)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435")),i.a.createElement("div",null,i.a.createElement("b",null,"About me"),":"," ",n.aboutMe?n.aboutMe:"no info"),n.contacts&&i.a.createElement("div",{className:ae.a.infoContainer},i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("b",null,"GitHub"),":"," ",n.contacts.github?n.contacts.github:"soon"),i.a.createElement("p",null,i.a.createElement("b",null,"VK"),":"," ",n.contacts.vk?n.contacts.vk:"soon"),i.a.createElement("p",null,i.a.createElement("b",null,"Instagram"),":"," ",n.contacts.instagram?n.contacts.instagram:"soon")),i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("b",null,"Website"),":"," ",n.contacts.website?n.contacts.website:"soon"),i.a.createElement("p",null,i.a.createElement("b",null,"Facebook"),":"," ",n.contacts.facebook?n.contacts.facebook:"soon"),i.a.createElement("p",null,i.a.createElement("b",null,"Twitter"),":"," ",n.contacts.twitter?n.contacts.twitter:"soon"))))},re=a(30),ie=a.n(re),oe=a(22),se=function(e){var t=e.setHide,a=Object(b.d)(function(e){return e.profile.userProfilePage}),n=Object(b.c)(),r=Object(oe.a)({initialValues:{fullName:a.fullName,aboutMe:a.aboutMe,vk:a.contacts.vk,twitter:a.contacts.twitter,facebook:a.contacts.facebook,website:a.contacts.website,instagram:a.contacts.instagram,github:a.contacts.github},onSubmit:function(e){var a=e.fullName,r=e.aboutMe,i=e.vk,o=e.twitter,s=e.facebook,c=e.website,l=e.instagram,u=e.github;n(function(e,t){return function(){var a=Object(O.a)(C.a.mark(function a(n,r){var i,o;return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=r().profile.userProfilePage,(i=Object(j.a)(Object(j.a)(Object(j.a)({},i),e),{},{contacts:Object(j.a)(Object(j.a)({},i.contacts),t)})).lookingForAJobDescription="aaa",a.prev=3,a.next=6,K(i);case 6:1===(o=a.sent).resultCode?alert(o.messages[0]):n(X(i)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),w(a.t0);case 13:n(I(!1));case 14:case"end":return a.stop()}},a,null,[[3,10]])}));return function(e,t){return a.apply(this,arguments)}}()}({fullName:a,aboutMe:r},{vk:i,twitter:o,facebook:s,website:c,instagram:l,github:u})),t(!1)}});return i.a.createElement("form",{className:ie.a.mainContainer,onSubmit:r.handleSubmit},i.a.createElement("div",{className:ie.a.id},"\u041c\u043e\u0439 id:",a.userId),i.a.createElement("div",{className:ie.a.settings},i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043c\u044f \u043d\u0430:",i.a.createElement("input",Object.assign({id:"fullName",type:"text",placeholder:"fullName"},r.getFieldProps("fullName")))),i.a.createElement("div",null,"\u041e\u0431\u043e \u043c\u043d\u0435:",i.a.createElement("textarea",Object.assign({id:"aboutMe",placeholder:"aboutMe"},r.getFieldProps("aboutMe")))),i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 VK \u043d\u0430:",i.a.createElement("input",Object.assign({id:"vk",type:"text",placeholder:"VK"},r.getFieldProps("vk")))),i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 twitter \u043d\u0430:",i.a.createElement("input",Object.assign({id:"twitter",type:"text",placeholder:"twitter"},r.getFieldProps("twitter")))),i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 facebook \u043d\u0430:",i.a.createElement("input",Object.assign({id:"facebook",type:"text",placeholder:"facebook"},r.getFieldProps("facebook")))),i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 \u0441\u0432\u043e\u0435\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u043d\u0430:",i.a.createElement("input",Object.assign({id:"website",type:"text",placeholder:"website"},r.getFieldProps("website")))),i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 instagram \u043d\u0430:",i.a.createElement("input",Object.assign({id:"instagram",type:"text",placeholder:"instagram"},r.getFieldProps("instagram")))),i.a.createElement("div",null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0434\u0440\u0435\u0441 github \u043d\u0430:",i.a.createElement("input",Object.assign({id:"github",type:"text",placeholder:"github"},r.getFieldProps("github"))))),i.a.createElement("button",{className:ie.a.button,type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},ce=i.a.memo(function(e){var t,a=e.profileUserData,n=e.status,o=e.updateStatusTC,s=Object(r.useState)(!1),c=Object(q.a)(s,2),l=c[0],u=c[1],m=Object(b.c)(),p=Object(b.d)(function(e){var t;return null===(t=e.profile.userProfilePage)||void 0===t?void 0:t.userId}),f=Object(b.d)(function(e){return e.login.id});return i.a.createElement("div",{className:ee.a.mainContainer},i.a.createElement("div",{className:ee.a.profileImgContainer},i.a.createElement("img",{src:(null===(t=a.photos)||void 0===t?void 0:t.small)?a.photos.large:"https://i.pinimg.com/736x/75/24/87/752487a0b94808fe215c2dbf3f3f18b7.jpg",alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0442\u043e\u0433\u043e, \u0447\u0435\u0433\u043e \u043d\u0435\u0442\u0443"}),i.a.createElement("div",{className:ee.a.nameContainer},i.a.createElement("p",null,i.a.createElement("b",null,a.fullName)),i.a.createElement(H,{value:n,updateStatusTC:o}),p===f&&i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{name:"file",id:"file-type",type:"file",onChange:function(e){var t;e.target.files&&m((t=e.target.files[0],function(){var e=Object(O.a)(C.a.mark(function e(a){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(I(!0)),e.prev=1,e.next=4,J(t);case 4:n=e.sent,a((r=n.data.data,{type:T.updatePhotos,payload:{photos:r}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w(e.t0);case 11:a(I(!1));case 12:case"end":return e.stop()}var r},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()))},style:{display:"none"}}),i.a.createElement("label",{className:ee.a.fileInput,htmlFor:"file-type"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443")))),i.a.createElement(ne,{hide:l,setHide:u}),l&&p===f&&i.a.createElement(se,{setHide:u}))}),le=a(31),ue=a.n(le),me=a(70),pe=a.n(me),fe=i.a.memo(function(e){var t=e.message,a=e.likeCount,n=e.photo;return i.a.createElement("div",{className:pe.a.mainContainer},i.a.createElement("img",{src:n||"https://sun1-17.userapi.com/s/v1/if1/pvTi5V3csQH8-oqUnfesELwgtLWyEePqE6Hz5SdqoVZxItBnm_XwfAiDMfANJPjpj7jtW_O5.jpg?size=200x200&quality=96&crop=0,0,979,979&ava=1",alt:"pikabu"}),i.a.createElement("div",null,i.a.createElement("div",null,t),i.a.createElement("div",null,i.a.createElement("span",null,"like: ",a))))}),de=i.a.memo(function(e){var t=e.postsData,a=e.setNewPostClickAC,n=Object(b.d)(function(e){return e.profile.userProfilePage.photos.small}),r=t.map(function(e){return i.a.createElement(fe,{photo:n,key:e.id,message:e.message,likeCount:e.likeCount})}),o=Object(oe.a)({initialValues:{messages:""},onSubmit:function(e){a(e.messages),o.resetForm()}});return i.a.createElement("div",{className:ue.a.mainContainer},i.a.createElement("div",{className:ue.a.newPostContainer},i.a.createElement("span",null,"My posts"),i.a.createElement("form",{onSubmit:o.handleSubmit,className:ue.a.formContainer},i.a.createElement("textarea",{rows:5,name:"messages",id:"messages",placeholder:"write",onChange:o.handleChange,value:o.values.messages}),i.a.createElement("button",{type:"submit"},"Add new post"))),i.a.createElement("div",{className:ue.a.posts},r))}),be=Object(b.b)(function(e){return{postsData:e.profile.postsData}},{setNewPostClickAC:function(e){return{type:T.setNewPostClick,payload:{message:e,likeCount:0,id:Object(G.v1)()}}}})(de),ge=i.a.memo(function(e){var t=e.profileUserData,a=e.status,n=e.updateStatusTC,r=Object(b.d)(function(e){var t;return null===(t=e.profile.userProfilePage)||void 0===t?void 0:t.userId}),o=Object(b.d)(function(e){return e.login.id});return i.a.createElement("div",{className:z.a.mainContainer},i.a.createElement(ce,{profileUserData:t,status:a,updateStatusTC:n}),r===o&&i.a.createElement(be,null))}),ve=a(71),Ee=a.n(ve),he=function(){return i.a.createElement("img",{src:Ee.a,style:{width:100},alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u043e\u0441\u044c((("})},Ce=a(20),Oe=a(75),je=["isAuth"],_e=function(e){return{isAuth:e.login.isAuth}};var Pe,we=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.setProfileUserDataTC(this.props),this.props.getStatusTC(this.props)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.props.preloader&&i.a.createElement(he,null),i.a.createElement(ge,{profileUserData:this.props.userProfilePage,status:this.props.status,updateStatusTC:this.props.updateStatusTC}))}}]),a}(i.a.PureComponent),ye=Object(Ce.c)(Object(b.b)(function(e){return{preloader:e.userPage.preloader,userProfilePage:e.profile.userProfilePage,status:e.profile.status}},{setProfileUserDataTC:function(e){return function(){var t=Object(O.a)(C.a.mark(function t(a,n){var r,i,o;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),(r=e.match.params.userId)||(i=n().login.id,r=i),t.prev=3,t.next=6,V(r);case 6:o=t.sent,a(X(o.data)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),w(t.t0);case 13:a(I(!1));case 14:case"end":return t.stop()}},t,null,[[3,10]])}));return function(e,a){return t.apply(this,arguments)}}()},getStatusTC:function(e){return function(){var t=Object(O.a)(C.a.mark(function t(a,n){var r,i,o;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),(r=e.match.params.userId)||(i=n().login.id,r=i),t.prev=3,t.next=6,W(r);case 6:o=t.sent,a(Y(o.data)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),w(t.t0);case 13:a(I(!1));case 14:case"end":return t.stop()}},t,null,[[3,10]])}));return function(e,a){return t.apply(this,arguments)}}()},updateStatusTC:function(e){return function(){var t=Object(O.a)(C.a.mark(function t(a){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),t.next=3,Z(e);case 3:0===t.sent.data.resultCode&&a(Y(e)),a(I(!1));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}),R.f,function(e){return Object(b.b)(_e)(function(t){var a=t.isAuth,n=Object(Oe.a)(t,je);return a?i.a.createElement(e,n):i.a.createElement(R.a,{to:"/login"})})})(we),ke=a(72),Ne=a.n(ke),Se=i.a.memo(function(e){var t=e.ThunkLogIn,a=e.isAuth,n=Object(b.c)(),r=Object(oe.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password.length<3&&(t.password="The password is too short"),t},onSubmit:function(e){n(t(e.email,e.password,e.rememberMe))}});return a?i.a.createElement(R.a,{to:"/profile"}):i.a.createElement("div",{className:Ne.a.allContainer},i.a.createElement("span",null,"Log In"),i.a.createElement("div",null,i.a.createElement("p",null,"To log in get registered",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),i.a.createElement("p",null,"or use common test account credentials:"),i.a.createElement("p",null,"Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement("form",{onSubmit:r.handleSubmit},i.a.createElement("input",Object.assign({id:"email",type:"email",placeholder:"email"},r.getFieldProps("email"))),r.touched.email&&r.errors.email&&i.a.createElement("div",{style:{color:"red"}},r.errors.email),i.a.createElement("br",null),i.a.createElement("input",Object.assign({id:"password",type:"password",placeholder:"password"},r.getFieldProps("password"))),r.touched.password&&r.errors.password&&i.a.createElement("div",{style:{color:"red"}},r.errors.password),i.a.createElement("br",null),i.a.createElement("input",Object.assign({id:"check",type:"checkbox",checked:r.values.rememberMe},r.getFieldProps("rememberMe")))," Remember Me",i.a.createElement("br",null),i.a.createElement("button",{type:"submit"},"Log In")))}),xe=Object(b.b)(function(e){return{isAuth:e.login.isAuth}},{ThunkLogIn:function(e,t,a){return function(){var n=Object(O.a)(C.a.mark(function n(r){return C.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(I(!0)),n.prev=1,n.next=4,N(e,t,a);case 4:0===n.sent.data.resultCode&&r(D()),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),w(n.t0);case 11:r(I(!1));case 12:case"end":return n.stop()}},n,null,[[1,8]])}));return function(e){return n.apply(this,arguments)}}()}})(Se);!function(e){e.initializedSuccess="APP/INITIALIZED-SUCCESS"}(Pe||(Pe={}));var Ae,Ie={initialized:!1},Te=a(73),Ue=a.n(Te),Fe=function(){return i.a.createElement("header",{className:Ue.a.header},i.a.createElement("span",null,"Social Network"))},De=function(e){return y.delete("follow/"+e)},Me=function(e){return y.post("follow/"+e)},Re=function(e,t){var a={page:e,count:t,term:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""};return y.get("users",{params:a})},Le=function(){return y.get("users",{params:{page:1,count:100,friend:!0}})};!function(e){e.subscribe="USERSPAGE/SUBSCRIBE",e.unSubscribe="USERSPAGE/UNSUBSCRIBE",e.setUsers="USERSPAGE/SET-USERS",e.setTotalUsersCount="USERSPAGE/SET-TOTAL-USERS-COUNT",e.changeCurrentPage="USERSPAGE/CHANGE-CURRENT-PAGE",e.toggleFollowingInProgress="USERSPAGE/TOGGLE-FOLLOWING-IN-PROGRESS"}(Ae||(Ae={}));var ze,qe={users:[],pageSize:20,totalUsersCount:0,currentPage:1,preloader:!1,followingInProgress:[]},He=function(e){return{type:Ae.subscribe,payload:{id:e}}},Be=function(e){return{type:Ae.unSubscribe,payload:{id:e}}},Ge=function(e){return{type:Ae.setUsers,payload:{users:e}}},Ve=function(e){return{type:Ae.setTotalUsersCount,payload:{totalUsersCount:e}}},We=function(e,t){return{type:Ae.toggleFollowingInProgress,payload:{isFetching:e,userId:t}}},Ze=function(){return function(){var e=Object(O.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(I(!0)),e.prev=1,e.next=4,Le();case 4:a=e.sent,t(Ge(a.data.items)),t(Ve(a.data.totalCount)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),w(e.t0);case 12:t(I(!1));case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},Je=function(e){return function(){var t=Object(O.a)(C.a.mark(function t(a){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),a(We(!0,e)),t.prev=2,t.next=5,De(e);case 5:0===t.sent.data.resultCode&&a(Be(e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),w(t.t0);case 12:a(We(!1,e)),a(I(!1));case 14:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()},Ke=function(e){return function(){var t=Object(O.a)(C.a.mark(function t(a){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(I(!0)),a(We(!0,e)),t.prev=2,t.next=5,Me(e);case 5:0===t.sent.data.resultCode&&a(He(e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),w(t.t0);case 12:a(We(!1,e)),a(I(!1));case 14:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()},Qe=a(32),Xe=a.n(Qe),Ye=function(){var e=Object(b.d)(function(e){return e.login.isAuth}),t=Object(b.d)(function(e){return e.userPage.users}),a=Object(b.c)();return Object(r.useEffect)(function(){a(Ze())},[]),e?i.a.createElement("div",{className:Xe.a.mainContainer},t.map(function(e){return i.a.createElement("div",{key:e.id,className:Xe.a.friendContainer},i.a.createElement("div",{className:Xe.a.imgContainer},i.a.createElement(p.c,{to:"/profile/"+e.id},i.a.createElement("img",{src:null===e.photos.small?"https://sun1-17.userapi.com/s/v1/if1/pvTi5V3csQH8-oqUnfesELwgtLWyEePqE6Hz5SdqoVZxItBnm_XwfAiDMfANJPjpj7jtW_O5.jpg?size=200x200&quality=96&crop=0,0,979,979&ava=1":e.photos.small,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}))),i.a.createElement("div",{className:Xe.a.textContainer},i.a.createElement("span",{style:{wordBreak:"break-all"}},e.name),i.a.createElement("span",{style:{fontSize:16}},e.status?e.status:"no status")),e.followed?i.a.createElement("button",{onClick:function(){return t=e.id,void a(Je(t));var t}},"unfollow"):i.a.createElement("button",{onClick:function(){return t=e.id,void a(Ke(t));var t}},"follow"))})):i.a.createElement(R.a,{to:"/login"})},$e=a(24),et=a.n($e),tt=a(46),at=a.n(tt),nt=i.a.memo(function(e){var t=e.totalCount,a=e.pageCount,n=e.callback,o=Object(r.useState)(1),s=Object(q.a)(o,2),c=s[0],l=s[1],u=Math.ceil(t/a),m=[];!function(e,t,a){if(t>10)if(a>5)for(var n=a-4;n<=a+5&&(e.push(n),n!==t);n++);else for(var r=1;r<=10&&(e.push(r),r!==t);r++);else for(var i=1;i<=t;i++)e.push(i)}(m,u,c);var p=Object(r.useState)(null),f=Object(q.a)(p,2),d=f[0],b=f[1];return Object(r.useEffect)(function(){d&&n(c),b(1)},[c]),i.a.createElement("div",{className:at.a.pages},i.a.createElement("span",{onClick:function(){return l(1)}}," ","<<"," "),i.a.createElement("span",{onClick:function(){return l(c-1)}},"<"," "),m.map(function(e,t){return i.a.createElement("span",{key:t,className:c===e?at.a.currentPage:at.a.page,onClick:function(){return l(e)}},e," ")}),i.a.createElement("span",{onClick:function(){return l(c+1)}}," ",">"," "),i.a.createElement("span",{onClick:function(){return l(u)}},">>"," "))}),rt=function(){var e=Object(b.d)(function(e){return e.userPage.users}),t=Object(b.d)(function(e){return e.userPage.totalUsersCount}),a=Object(b.d)(function(e){return e.userPage.currentPage}),n=Object(b.d)(function(e){return e.userPage.followingInProgress}),o=Object(b.c)(),s=Object(r.useCallback)(function(e){var t;o((t=e,{type:Ae.changeCurrentPage,payload:{currentPage:t}}))},[]);return Object(r.useEffect)(function(){o(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:"");return function(){var a=Object(O.a)(C.a.mark(function a(n,r){var i,o;return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(I(!0)),i=r().userPage.currentPage,n(I(!0)),a.prev=3,a.next=6,Re(i,e,t);case 6:o=a.sent,n(Ge(o.data.items)),n(Ve(o.data.totalCount)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),w(a.t0);case 14:n(I(!1));case 15:case"end":return a.stop()}},a,null,[[3,11]])}));return function(e,t){return a.apply(this,arguments)}}()}())},[a]),i.a.createElement("div",{className:et.a.container},i.a.createElement(nt,{totalCount:t,pageCount:10,callback:s}),i.a.createElement("div",{className:et.a.containerUsers},e.map(function(e){return i.a.createElement("div",{className:et.a.containerUser,key:e.id},i.a.createElement("div",{className:et.a.imgAndName},i.a.createElement("div",null,i.a.createElement(p.c,{to:"/profile/"+e.id},i.a.createElement("img",{src:null===e.photos.small?"https://sun1-17.userapi.com/s/v1/if1/pvTi5V3csQH8-oqUnfesELwgtLWyEePqE6Hz5SdqoVZxItBnm_XwfAiDMfANJPjpj7jtW_O5.jpg?size=200x200&quality=96&crop=0,0,979,979&ava=1":e.photos.small,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"}))),i.a.createElement("div",{className:et.a.statusAndName},i.a.createElement("span",null,e.name),i.a.createElement("span",{style:{fontSize:16}},e.status?e.status:"no status"))),e.followed?i.a.createElement("button",{disabled:n.some(function(t){return t===e.id}),onClick:function(){return t=e.id,void o(Je(t));var t}},"unfollow"):i.a.createElement("button",{disabled:n.some(function(t){return t===e.id}),onClick:function(){return t=e.id,void o(Ke(t));var t}},"follow"))})))},it=a(25),ot=a.n(it),st=function(){for(var e=Object(b.c)(),t=Object(b.d)(function(e){return e.userPage.users}).slice(0,6),a=Object(b.d)(function(e){return e.messages.messagesData}),n=0;n<6;n++)t[n]=Object(j.a)(Object(j.a)({},t[n]),{},{message:a[n].message,time:a[n].time});return Object(r.useEffect)(function(){e(Ze())},[]),i.a.createElement(i.a.Fragment,null,t.map(function(e){var t;return i.a.createElement("div",{className:ot.a.mainContainer,key:e.id},i.a.createElement("div",{className:ot.a.contentContainer},i.a.createElement("div",{className:ot.a.imgContainer},i.a.createElement(p.c,{to:"/profile/"+e.id},i.a.createElement("img",{src:(null===(t=e.photos)||void 0===t?void 0:t.small)?e.photos.small:"https://sun1-17.userapi.com/s/v1/if1/pvTi5V3csQH8-oqUnfesELwgtLWyEePqE6Hz5SdqoVZxItBnm_XwfAiDMfANJPjpj7jtW_O5.jpg?size=200x200&quality=96&crop=0,0,979,979&ava=1",alt:"Photo uf user"})),i.a.createElement("span",{style:{wordBreak:"break-all"}},e.name))),i.a.createElement("div",{className:ot.a.textContainer},i.a.createElement("span",null,e.message),i.a.createElement("span",{className:ot.a.time},e.time)))}))},ct=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeTC()}},{key:"render",value:function(){return this.props.initialized?i.a.createElement("div",{className:m.a.allContainer},i.a.createElement(Fe,null),i.a.createElement("div",{className:m.a.mainContainer},i.a.createElement(M,null),i.a.createElement("div",{className:m.a.contentContainer},i.a.createElement(R.b,{path:"/dialogs",render:function(){return i.a.createElement(st,null)}}),i.a.createElement(R.b,{exact:!0,path:"/",render:function(){return i.a.createElement(ye,null)}}),i.a.createElement(R.b,{path:"/profile/:userId?",render:function(){return i.a.createElement(ye,null)}}),i.a.createElement(R.b,{path:"/users",render:function(){return i.a.createElement(rt,null)}}),i.a.createElement(R.b,{path:"/login",render:function(){return i.a.createElement(xe,null)}}),i.a.createElement(R.b,{path:"/friends",render:function(){return i.a.createElement(Ye,null)}})))):i.a.createElement(he,null)}}]),a}(i.a.PureComponent),lt=Object(Ce.c)(Object(b.b)(function(e){return{initialized:e.AppReducer.initialized}},{initializeTC:function(){return function(){var e=Object(O.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(D());case 3:t({type:Pe.initializedSuccess}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),w(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()}}),R.f)(ct),ut=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,109)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)})};ze||(ze={});var mt={messagesData:[{message:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0432 \u0441\u0443\u0431\u0431\u043e\u0442\u0443 \u0435\u0449\u0451 \u0432 \u0441\u0438\u043b\u0435?",time:"29/04/22 16:52"},{message:"\u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c! \u0412\u044b \u0435\u0449\u0451 \u043f\u0440\u043e\u0434\u0430\u0435\u0442\u0435 \u0448\u043e\u0433\u0438?",time:"28/04/22 17:52"},{message:"\u041f\u0440\u0438\u0432\u0435\u0442! \u0414\u0430\u0432\u043d\u043e \u043d\u0435 \u0432\u0438\u0434\u0435\u043b\u0438\u0441\u044c, \u043a\u0430\u043a \u0434\u0435\u043b\u0430?",time:"27/04/22 18:52"},{message:"\u0412\u043e\u0442 \u043e\u0444\u0435\u0440 \u043d\u0430 3000$, \u0445\u043e\u0442\u0438\u0442\u0435 \u0431\u044b\u0442\u044c \u0443 \u043d\u0430\u0441 \u0434\u0436\u0443\u043d\u043e\u043c?",time:"26/04/22 19:52"},{message:"\u0422\u0435\u0431\u044f \u0442\u043e\u0447\u043d\u043e \u0432\u043e\u0437\u044c\u043c\u0443\u0442 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443!",time:"25/04/22 21:52"},{message:"\u041a\u0430\u043a\u0430\u044f \u043a\u043b\u0430\u0441\u0441\u043d\u0430\u044f \u0441\u043e\u0446 \u0441\u0435\u0442\u044c \u0443 \u0442\u0435\u0431\u044f \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0430\u0441\u044c!",time:"24/04/22 20:52"}]},pt=a(74),ft=Object(Ce.b)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return(arguments.length>1?arguments[1]:void 0).type,e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.setNewPostClick:return Object(j.a)(Object(j.a)({},e),{},{postsData:[t.payload].concat(Object(B.a)(e.postsData))});case T.setProfileUserData:case n.changePreloader:case T.setStatus:return Object(j.a)(Object(j.a)({},e),t.payload);case T.updatePhotos:return Object(j.a)(Object(j.a)({},e),{},{userProfilePage:Object(j.a)(Object(j.a)({},e.userProfilePage),t.payload.photos)});default:return e}},userPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae.subscribe:return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map(function(e){return e.id===t.payload.id?Object(j.a)(Object(j.a)({},e),{},{followed:!0}):Object(j.a)({},e)})});case Ae.unSubscribe:return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map(function(e){return e.id===t.payload.id?Object(j.a)(Object(j.a)({},e),{},{followed:!1}):Object(j.a)({},e)})});case Ae.setUsers:case Ae.setTotalUsersCount:case Ae.changeCurrentPage:case n.changePreloader:return Object(j.a)(Object(j.a)({},e),t.payload);case Ae.toggleFollowingInProgress:return Object(j.a)(Object(j.a)({},e),{},{followingInProgress:t.payload.isFetching?[].concat(Object(B.a)(e.followingInProgress),[t.payload.userId]):e.followingInProgress.filter(function(e){return e!==t.payload.userId})});default:return Object(j.a)({},e)}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.setAuthData:return Object(j.a)(Object(j.a)({},e),t.payload);default:return Object(j.a)({},e)}},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.changePreloader:return Object(j.a)(Object(j.a)({},e),t.payload);default:return Object(j.a)({},e)}},AppReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;switch((arguments.length>1?arguments[1]:void 0).type){case Pe.initializedSuccess:return Object(j.a)(Object(j.a)({},e),{},{initialized:!0});default:return Object(j.a)({},e)}}}),dt=Object(Ce.d)(ft,Object(Ce.a)(pt.a));window.store=dt;var bt=a(35);a.n(bt).a.render(i.a.createElement(p.a,null,i.a.createElement(b.a,{store:dt},i.a.createElement(lt,null))),document.getElementById("root")),ut()},23:function(e,t,a){e.exports={navbar:"Navbar_navbar__1tzDp",active:"Navbar_active__2uMtm"}},24:function(e,t,a){e.exports={container:"Users_container__iEjx_",containerUsers:"Users_containerUsers__gbPN0",containerUser:"Users_containerUser__2jjAV",imgAndName:"Users_imgAndName__3yKAQ",statusAndName:"Users_statusAndName__Gs-zP"}},25:function(e,t,a){e.exports={mainContainer:"Dialogs_mainContainer__QlxcU",contentContainer:"Dialogs_contentContainer__1ww0O",imgContainer:"Dialogs_imgContainer__22Ytq",timeContainer:"Dialogs_timeContainer__2qtEO",textContainer:"Dialogs_textContainer__sY_FZ",time:"Dialogs_time__1oBBZ"}},28:function(e,t,a){e.exports={mainContainer:"ProfileInfo_mainContainer__3j7O7",profileImgContainer:"ProfileInfo_profileImgContainer__1fJQT",nameContainer:"ProfileInfo_nameContainer__3RfvT",fileInput:"ProfileInfo_fileInput__2L_ui",button:"ProfileInfo_button__3uaCr"}},29:function(e,t,a){e.exports={mainContainer:"Contacts_mainContainer__oG1gv",infoContainer:"Contacts_infoContainer__kAqOu",buttonContainer:"Contacts_buttonContainer__HR-Cs",button:"Contacts_button__268Sz"}},30:function(e,t,a){e.exports={mainContainer:"Settings_mainContainer__2Z2x2",button:"Settings_button__1jPMO",settings:"Settings_settings__2joqG",id:"Settings_id__JRBlG"}},31:function(e,t,a){e.exports={mainContainer:"MyPost_mainContainer__3kFTJ",newPostContainer:"MyPost_newPostContainer__2hAHN",formContainer:"MyPost_formContainer__23NBj",posts:"MyPost_posts__B2XNC"}},32:function(e,t,a){e.exports={mainContainer:"Friends_mainContainer__1BJw6",friendContainer:"Friends_friendContainer__1piQZ",imgContainer:"Friends_imgContainer__32NKR",textContainer:"Friends_textContainer__36F30"}},45:function(e,t,a){e.exports={allContainer:"App_allContainer__2DW9Q",mainContainer:"App_mainContainer__32gD_",contentContainer:"App_contentContainer__26wrs"}},46:function(e,t,a){e.exports={pages:"Pagination_pages__25KpY",currentPage:"Pagination_currentPage__1WNWN",page:"Pagination_page__X0MDs"}},67:function(e,t,a){e.exports={mainContainer:"Profile_mainContainer__1eiNj"}},70:function(e,t,a){e.exports={mainContainer:"Post_mainContainer__1o5Er"}},71:function(e,t,a){e.exports=a.p+"static/media/preloader.087f5d2f.gif"},72:function(e,t,a){e.exports={allContainer:"Login_allContainer__aSMRf"}},73:function(e,t,a){e.exports={header:"Header_header__2mujF"}},76:function(e,t,a){e.exports=a(108)},78:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.385d5ed5.chunk.js.map