{"ast":null,"code":"import { v1 } from \"uuid\";\nimport { changePreloader } from \"./usersPageReducer\";\nimport { profileAPI } from \"../../API\";\nconst initialState = {\n  postsData: [{\n    id: v1(),\n    message: 'yo',\n    likeCount: 12\n  }, {\n    id: v1(),\n    message: 'yoyo',\n    likeCount: 212\n  }, {\n    id: v1(),\n    message: 'yoyo',\n    likeCount: 212\n  }],\n  newPostText: '',\n  userProfilePage: null,\n  preloader: false,\n  status: ''\n};\nexport const profilePageReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"SET-NEW-POST-CLICK\":\n      {\n        const post = {\n          id: v1(),\n          message: state.newPostText,\n          likeCount: 0\n        };\n        return { ...state,\n          postsData: [post, ...state.postsData],\n          newPostText: ''\n        };\n      }\n\n    case \"SET-NEW-POST-ENTER\":\n      {\n        if (action.eventKey === 'Enter') {\n          const post = {\n            id: v1(),\n            message: state.newPostText,\n            likeCount: 0\n          };\n          return { ...state,\n            postsData: [post, ...state.postsData],\n            newPostText: ''\n          };\n        }\n\n        return { ...state\n        };\n      }\n\n    case \"SET-POST-TEXT\":\n      {\n        return { ...state,\n          newPostText: action.text\n        };\n      }\n\n    case \"SET-PROFILE-USER-DATA\":\n      {\n        return { ...state,\n          userProfilePage: action.data\n        };\n      }\n\n    case \"PRELOADER\":\n      {\n        return { ...state,\n          preloader: action.preloader\n        };\n      }\n\n    case \"GET-STATUS\":\n      {\n        console.log(action.status);\n        return { ...state,\n          status: action.status\n        };\n      }\n\n    default:\n      {\n        return { ...state\n        };\n      }\n  }\n};\nexport const setNewPostClick = () => {\n  return {\n    type: 'SET-NEW-POST-CLICK'\n  };\n};\nexport const setNewPostEnter = eventKey => {\n  return {\n    type: 'SET-NEW-POST-ENTER',\n    eventKey\n  };\n};\nexport const setPostText = text => {\n  return {\n    type: 'SET-POST-TEXT',\n    text\n  };\n};\nexport const setProfileUserData = data => {\n  return {\n    type: 'SET-PROFILE-USER-DATA',\n    data\n  };\n};\nexport const setStatus = status => {\n  return {\n    type: 'GET-STATUS',\n    status\n  };\n}; // type changeStatusType = ReturnType<typeof changeStatus>\n// export const changeStatus = (status: string) => {\n//     return {\n//         type: 'CHANGE-STATUS',\n//         status,\n//     } as const\n// }\n\nexport const thunkSetProfileUserData = param => async dispatch => {\n  dispatch(changePreloader(true));\n  let userId = param.match.params.userId;\n\n  if (!userId) {\n    userId = '16550';\n  }\n\n  profileAPI.setProfileUserData(userId).then(data => {\n    dispatch(changePreloader(false));\n    dispatch(setProfileUserData(data));\n  });\n};\nexport const thunkGETStatus = param => async dispatch => {\n  let userId = param.match.params.userId;\n\n  if (!userId) {\n    userId = '16550';\n  }\n\n  profileAPI.getProfileStatus(userId).then(data => {\n    dispatch(setStatus(data));\n  });\n};\nexport const thunkUpdateStatus = status => async dispatch => {\n  // debugger\n  profileAPI.updateProfileStatus(status).then(data => {\n    // debugger\n    // console.log(data)\n    if (data.resultCode === 0) {\n      dispatch(setStatus(status));\n    }\n  });\n};","map":{"version":3,"sources":["D:/It-inkubator/socset-na-ts/src/redux/reducer/profilePageReducer.ts"],"names":["v1","changePreloader","profileAPI","initialState","postsData","id","message","likeCount","newPostText","userProfilePage","preloader","status","profilePageReducer","state","action","type","post","eventKey","text","data","console","log","setNewPostClick","setNewPostEnter","setPostText","setProfileUserData","setStatus","thunkSetProfileUserData","param","dispatch","userId","match","params","then","thunkGETStatus","getProfileStatus","thunkUpdateStatus","updateProfileStatus","resultCode"],"mappings":"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","sourcesContent":["import {v1} from \"uuid\";\r\nimport {changePreloader, preloaderACType} from \"./usersPageReducer\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppStateType} from \"../storeRedux\";\r\nimport {profileAPI} from \"../../API\";\r\n\r\nexport type profilePageType = {\r\n    postsData: PostDataProps[]\r\n    newPostText: string\r\n    userProfilePage: userProfilePageType | null\r\n    preloader: boolean\r\n    status: string\r\n}\r\nexport type PostDataProps = {\r\n    id: string\r\n    message: string\r\n    likeCount: number\r\n}\r\nexport type userProfilePageType = {\r\n    aboutMe: string | null\r\n    contacts: {\r\n        facebook: string | null\r\n        website: string | null\r\n        vk: string | null\r\n        twitter: string | null\r\n        instagram: string | null\r\n        youtube: string | null\r\n        github: string | null\r\n        mainLink: string | null\r\n    }\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string | null\r\n    fullName: string\r\n    userId: number\r\n    photos: {\r\n        small: string | undefined\r\n        large: string | undefined\r\n    }\r\n}\r\n\r\nconst initialState: profilePageType = {\r\n    postsData: [\r\n        {id: v1(), message: 'yo', likeCount: 12},\r\n        {id: v1(), message: 'yoyo', likeCount: 212},\r\n        {id: v1(), message: 'yoyo', likeCount: 212},\r\n    ],\r\n    newPostText: '',\r\n    userProfilePage: null,\r\n    preloader: false,\r\n    status: ''\r\n}\r\n\r\nexport const profilePageReducer = (state: profilePageType = initialState, action: generalType): profilePageType => {\r\n    switch (action.type) {\r\n        case \"SET-NEW-POST-CLICK\": {\r\n            const post = {id: v1(), message: state.newPostText, likeCount: 0}\r\n            return {...state, postsData: [post, ...state.postsData], newPostText: ''}\r\n        }\r\n        case \"SET-NEW-POST-ENTER\": {\r\n            if (action.eventKey === 'Enter') {\r\n                const post = {id: v1(), message: state.newPostText, likeCount: 0}\r\n                return {...state, postsData: [post, ...state.postsData], newPostText: ''}\r\n            }\r\n            return {...state}\r\n        }\r\n        case \"SET-POST-TEXT\": {\r\n            return {...state, newPostText: action.text}\r\n        }\r\n        case \"SET-PROFILE-USER-DATA\": {\r\n            return {...state, userProfilePage: action.data}\r\n        }\r\n        case \"PRELOADER\": {\r\n            return {...state, preloader: action.preloader}\r\n        }\r\n        case \"GET-STATUS\": {\r\n            console.log(action.status)\r\n            return {...state, status: action.status}\r\n        }\r\n        default : {\r\n            return {...state}\r\n        }\r\n    }\r\n}\r\ntype generalType = setNewPostClickACType\r\n    | setNewPostEnterACType\r\n    | setPostTextACType\r\n    | setProfileUserDataACType\r\n    | preloaderACType\r\n    | getStatusType\r\n    // | changeStatusType\r\n\r\ntype setNewPostClickACType = ReturnType<typeof setNewPostClick>\r\nexport const setNewPostClick = () => {\r\n    return {\r\n        type: 'SET-NEW-POST-CLICK'\r\n    } as const\r\n}\r\ntype setNewPostEnterACType = ReturnType<typeof setNewPostEnter>\r\nexport const setNewPostEnter = (eventKey: string) => {\r\n    return {\r\n        type: 'SET-NEW-POST-ENTER',\r\n        eventKey\r\n    } as const\r\n}\r\n\r\ntype setPostTextACType = ReturnType<typeof setPostText>\r\nexport const setPostText = (text: string) => {\r\n    return {\r\n        type: 'SET-POST-TEXT',\r\n        text\r\n    } as const\r\n}\r\ntype setProfileUserDataACType = ReturnType<typeof setProfileUserData>\r\nexport const setProfileUserData = (data: userProfilePageType) => {\r\n    return {\r\n        type: 'SET-PROFILE-USER-DATA',\r\n        data\r\n    } as const\r\n}\r\n\r\ntype getStatusType = ReturnType<typeof setStatus>\r\nexport const setStatus = (status: string) => {\r\n    return {\r\n        type: 'GET-STATUS',\r\n        status,\r\n    } as const\r\n}\r\n\r\n// type changeStatusType = ReturnType<typeof changeStatus>\r\n// export const changeStatus = (status: string) => {\r\n//     return {\r\n//         type: 'CHANGE-STATUS',\r\n//         status,\r\n//     } as const\r\n// }\r\n\r\n\r\ntype ThunkActionType = ThunkAction<Promise<void>, AppStateType, unknown, generalType>\r\nexport const thunkSetProfileUserData = (param: any): ThunkActionType =>\r\n    async dispatch => {\r\n        dispatch(changePreloader(true))\r\n        let userId = param.match.params.userId\r\n        if (!userId) {\r\n            userId = '16550'\r\n        }\r\n        profileAPI.setProfileUserData(userId).then(data => {\r\n            dispatch(changePreloader(false))\r\n            dispatch(setProfileUserData(data))\r\n        })\r\n    }\r\nexport const thunkGETStatus = (param: any): ThunkActionType =>\r\n    async dispatch => {\r\n        let userId = param.match.params.userId\r\n        if (!userId) {\r\n            userId = '16550'\r\n        }\r\n        profileAPI.getProfileStatus(userId).then(data => {\r\n            dispatch(setStatus(data))\r\n        })\r\n    }\r\nexport const thunkUpdateStatus = (status: string): ThunkActionType =>\r\n    async dispatch => {\r\n    // debugger\r\n        profileAPI.updateProfileStatus(status).then(data => {\r\n            // debugger\r\n            // console.log(data)\r\n            if (data.resultCode===0){\r\n                dispatch(setStatus(status))\r\n            }\r\n        })\r\n    }\r\n\r\n"]},"metadata":{},"sourceType":"module"}