{"ast":null,"code":"import { headerAPI, loginAPI } from \"../../api/API\";\nexport let enumAuthActionType;\n\n(function (enumAuthActionType) {\n  enumAuthActionType[\"setAuthData\"] = \"AUTH/PROFILE/SET-NEW-POST-CLICK\";\n})(enumAuthActionType || (enumAuthActionType = {}));\n\nconst initialState = {\n  id: 0,\n  email: '',\n  login: '',\n  isAuth: false\n};\nexport const authReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case enumAuthActionType.setAuthData:\n      return { ...state,\n        ...action.payload\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}; //action\n\nexport const setAuthDataAC = data => {\n  return {\n    type: enumAuthActionType.setAuthData,\n    payload: { ...data\n    }\n  };\n}; //thunk\n\nexport const setAuthDataTC = () => async dispatch => {\n  const res = await headerAPI.setAuthData();\n  const {\n    id,\n    email,\n    login\n  } = res.data.data;\n  if (id) dispatch(setAuthDataAC({\n    id,\n    email,\n    login,\n    isAuth: true\n  }));\n  return 'aaa';\n};\nexport const logInTC = (email, password, rememberMe) => async dispatch => {\n  const res = await loginAPI.setLogin(email, password, rememberMe);\n  if (res.data.resultCode === 0) dispatch(setAuthDataTC());\n};\nexport const logOutTC = () => async dispatch => {\n  const res = await loginAPI.outLogin();\n  if (res.data.resultCode === 0) dispatch(setAuthDataAC({\n    id: 0,\n    email: '',\n    login: '',\n    isAuth: false\n  }));\n}; //type\n// export type authReducerType = {\n//     id: number | null\n//     email: string | null\n//     login: string | null\n//     isAuth: boolean\n// }","map":{"version":3,"sources":["D:/It-inkubator/socset-na-ts/src/redux/reducer/authReducer.ts"],"names":["headerAPI","loginAPI","enumAuthActionType","initialState","id","email","login","isAuth","authReducer","state","action","type","setAuthData","payload","setAuthDataAC","data","setAuthDataTC","dispatch","res","logInTC","password","rememberMe","setLogin","resultCode","logOutTC","outLogin"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,eAAlC;AAGA,WAAYC,kBAAZ;;WAAYA,kB;AAAAA,EAAAA,kB;GAAAA,kB,KAAAA,kB;;AAIZ,MAAMC,YAAY,GAAE;AAChBC,EAAAA,EAAE,EAAE,CADY;AAEhBC,EAAAA,KAAK,EAAE,EAFS;AAGhBC,EAAAA,KAAK,EAAE,EAHS;AAIhBC,EAAAA,MAAM,EAAE;AAJQ,CAApB;AAOA,OAAO,MAAMC,WAAW,GAAG,YAAuF;AAAA,MAAtFC,KAAsF,uEAA5DN,YAA4D;AAAA,MAA9CO,MAA8C;;AAC9G,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKT,kBAAkB,CAACU,WAAxB;AACI,aAAO,EAAC,GAAGH,KAAJ;AAAW,WAAGC,MAAM,CAACG;AAArB,OAAP;;AACJ;AACI,aAAO,EAAC,GAAGJ;AAAJ,OAAP;AAJR;AAMH,CAPM,C,CASP;;AACA,OAAO,MAAMK,aAAa,GAAIC,IAAD,IAA4B;AACrD,SAAO;AACHJ,IAAAA,IAAI,EAAET,kBAAkB,CAACU,WADtB;AAEHC,IAAAA,OAAO,EAAE,EAAC,GAAGE;AAAJ;AAFN,GAAP;AAIH,CALM,C,CAOP;;AACA,OAAO,MAAMC,aAAa,GAAG,MAAgB,MAAOC,QAAP,IAAoB;AAC7D,QAAMC,GAAG,GAAG,MAAMlB,SAAS,CAACY,WAAV,EAAlB;AACA,QAAM;AAACR,IAAAA,EAAD;AAAKC,IAAAA,KAAL;AAAYC,IAAAA;AAAZ,MAAqBY,GAAG,CAACH,IAAJ,CAASA,IAApC;AACA,MAAIX,EAAJ,EAAQa,QAAQ,CAACH,aAAa,CAAC;AAACV,IAAAA,EAAD;AAAKC,IAAAA,KAAL;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA,MAAM,EAAE;AAA3B,GAAD,CAAd,CAAR;AACR,SAAO,KAAP;AACH,CALM;AAMP,OAAO,MAAMY,OAAO,GAAG,CAACd,KAAD,EAAgBe,QAAhB,EAAkCC,UAAlC,KACnB,MAAOJ,QAAP,IAAoB;AAChB,QAAMC,GAAG,GAAG,MAAMjB,QAAQ,CAACqB,QAAT,CAAkBjB,KAAlB,EAAyBe,QAAzB,EAAmCC,UAAnC,CAAlB;AACA,MAAIH,GAAG,CAACH,IAAJ,CAASQ,UAAT,KAAwB,CAA5B,EAA+BN,QAAQ,CAACD,aAAa,EAAd,CAAR;AAClC,CAJE;AAKP,OAAO,MAAMQ,QAAQ,GAAG,MACpB,MAAOP,QAAP,IAAoB;AAChB,QAAMC,GAAG,GAAG,MAAMjB,QAAQ,CAACwB,QAAT,EAAlB;AACA,MAAIP,GAAG,CAACH,IAAJ,CAASQ,UAAT,KAAwB,CAA5B,EAA+BN,QAAQ,CAACH,aAAa,CAAC;AAACV,IAAAA,EAAE,EAAE,CAAL;AAAQC,IAAAA,KAAK,EAAE,EAAf;AAAmBC,IAAAA,KAAK,EAAE,EAA1B;AAA8BC,IAAAA,MAAM,EAAE;AAAtC,GAAD,CAAd,CAAR;AAClC,CAJE,C,CAMP;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {headerAPI, loginAPI} from \"../../api/API\";\r\nimport {AppThunk} from \"../store\";\r\n\r\nexport enum enumAuthActionType {\r\n    setAuthData = 'AUTH/PROFILE/SET-NEW-POST-CLICK',\r\n}\r\n\r\nconst initialState= {\r\n    id: 0,\r\n    email: '',\r\n    login: '',\r\n    isAuth: false,\r\n}\r\n\r\nexport const authReducer = (state: initialStateType = initialState, action: LoginActionType): initialStateType => {\r\n    switch (action.type) {\r\n        case enumAuthActionType.setAuthData:\r\n            return {...state, ...action.payload}\r\n        default:\r\n            return {...state}\r\n    }\r\n}\r\n\r\n//action\r\nexport const setAuthDataAC = (data: initialStateType) => {\r\n    return {\r\n        type: enumAuthActionType.setAuthData,\r\n        payload: {...data}\r\n    }\r\n}\r\n\r\n//thunk\r\nexport const setAuthDataTC = (): AppThunk => async (dispatch) => {\r\n    const res = await headerAPI.setAuthData()\r\n    const {id, email, login} = res.data.data\r\n    if (id) dispatch(setAuthDataAC({id, email, login, isAuth: true}))\r\n    return 'aaa'\r\n}\r\nexport const logInTC = (email: string, password: string, rememberMe: boolean): AppThunk =>\r\n    async (dispatch) => {\r\n        const res = await loginAPI.setLogin(email, password, rememberMe)\r\n        if (res.data.resultCode === 0) dispatch(setAuthDataTC())\r\n    }\r\nexport const logOutTC = (): AppThunk =>\r\n    async (dispatch) => {\r\n        const res = await loginAPI.outLogin()\r\n        if (res.data.resultCode === 0) dispatch(setAuthDataAC({id: 0, email: '', login: '', isAuth: false}))\r\n    }\r\n\r\n//type\r\n// export type authReducerType = {\r\n//     id: number | null\r\n//     email: string | null\r\n//     login: string | null\r\n//     isAuth: boolean\r\n// }\r\ntype initialStateType = typeof initialState\r\nexport type LoginActionType = ReturnType<typeof setAuthDataAC>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}